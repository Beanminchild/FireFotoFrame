
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Pittsburgh Weather & Clock</title>
    <style>
    /* New Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;600&display=swap');

    html, body {
        height: 100%;
        margin: 0;
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
        color: #fff;
        overflow: hidden;
        background: #000; /* fallback while container provides decorative background */
    }

    /* subtle star overlay so background doesn't look flat */
    .stars {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        background-image:
            radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,0.06)),
            radial-gradient(1px 1px at 40% 60%, rgba(255,255,255,0.05)),
            radial-gradient(1px 1px at 70% 20%, rgba(255,255,255,0.04));
        background-repeat: repeat;
        opacity: 0.7;
    }

    .container {
        /* Uiverse conic background + variables */
        width: 100%;
        height: 100%;
        --s: 160px; /* tile size */
        --c1: #ff847c;
        --c2: #e84a5f;
        --c3: #fecea8;
        --c4: #99b898;

        background: conic-gradient(
                from 45deg at 75% 75%,
                var(--c3) 90deg,
                var(--c1) 0 180deg,
                #0000 0
            ),
            conic-gradient(from -45deg at 25% 25%, var(--c3) 90deg, #0000 0),
            conic-gradient(from -45deg at 50% 100%, #0000 180deg, var(--c3) 0),
            conic-gradient(
                from -45deg,
                var(--c1) 90deg,
                var(--c2) 0 225deg,
                var(--c4) 0
            );
        background-size: var(--s) var(--s);

        position: relative;
        z-index: 5;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 20px;
        text-align: center;
        padding: 2rem;
        box-sizing: border-box;
    }

    /* main clock */
    .main-clock {
        font-family: 'Bebas Neue', cursive;
        font-size: clamp(3rem, 8vw, 7rem);
        color: #fff;
        text-shadow: 0 6px 18px rgba(0,0,0,0.6), 0 2px 8px rgba(0,0,0,0.5);
        background: linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.16));
        border-left: 6px solid rgba(255,255,255,0.06);
        padding: 20px 34px;
        border-radius: 18px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.6), 0 2px 0 rgba(255,255,255,0.02) inset;
        display: inline-block;
    }

    .subline {
        font-size: clamp(1rem, 2.4vw, 1.4rem);
        color: rgba(255,255,255,0.9);
        text-shadow: 0 2px 6px rgba(0,0,0,0.6);
    }

    .weather-display {
        font-size: clamp(1rem, 2vw, 1.6rem);
        color: #fff;
        background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.06));
        padding: 16px 20px;
        border-radius: 14px;
        border: 1px solid rgba(0,0,0,0.25);
        box-shadow: 0 6px 20px rgba(0,0,0,0.45);
        display: inline-block;
        min-width: 300px;
        max-width: 720px;
        text-align: left;
    }

    .weather-main {
        display: flex;
        align-items: center;
        gap: 12px;
    }
    .weather-main img {
        width: 64px;
        height: 64px;
        object-fit: contain;
        filter: drop-shadow(0 4px 12px rgba(0,0,0,0.6));
    }
    .weather-temp {
        font-size: 1.6rem;
        font-weight: 600;
        color: white
    }
    .weather-details {
        margin-top: 8px;
        color: rgba(255,255,255,0.95);
        font-size: 0.95rem;
        opacity: 0.95;
    }
    .muted { color: rgba(255,255,255,0.7); font-weight: 400; }

    /* Portrait / vertical displays: make clock & weather larger and stacked */
    @media (orientation: portrait) {
        .main-clock {
            font-size: clamp(5rem, 18vw, 12rem);
            padding: 28px 44px;
        }
        .subline {
            font-size: clamp(1.4rem, 5vw, 2.2rem);
        }
        .weather-display {
            font-size: clamp(1.3rem, 5vw, 2.2rem);
            padding: 22px 26px;
            max-width: 94vw;
        }
        .weather-main img {
            width: 92px;
            height: 92px;
        }
        .weather-temp { font-size: 2rem; }
    }
</style>
</head>
<body>
    <div class="stars" aria-hidden="true"></div>

    <div class="container">
        <div class="main-clock" id="clock">
            Loading...
        </div>
        <div class="subline" id="clock-sub">Local time and date</div>

        <div class="weather-display" id="weather-display" aria-live="polite" aria-atomic="true">
            Fetching Pittsburgh weather...
        </div>
    </div>

<script>
    // Update local time and date
    function updateClock() {
        const el = document.getElementById('clock');
        const sub = document.getElementById('clock-sub');
        const now = new Date();
        const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit', hour12: true});
        const dateString = now.toLocaleDateString([], {weekday:'short', year:'numeric', month:'short', day:'numeric'});
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || '';
        el.textContent = timeString;
        sub.textContent = `${dateString} ${tz ? `• ${tz}` : ''}`;
    }

    // Weather fetch (wttr.in JSON)
    async function fetchPittsburghWeather() {
        const weatherElement = document.getElementById('weather-display');
        try {
            const response = await fetch('https://wttr.in/Pittsburgh?format=j1');
            if (!response.ok) throw new Error('Weather data not available');
            const data = await response.json();
            const cur = (data && data.current_condition && data.current_condition[0]) || {};
            const tempF = cur.temp_F || cur.temp_C ? `${cur.temp_F || ''}` : '—';
            const tempC = cur.temp_C || '—';
            const feelsF = cur.FeelsLikeF || cur.FeelsLikeC || '—';
            const desc = (cur.weatherDesc && cur.weatherDesc[0] && cur.weatherDesc[0].value) || '—';
            const humidity = cur.humidity || '—';
            const windKmph = cur.windspeedKmph || '—';
            const windDir = cur.winddir16Point || '';
            const precip = cur.precipMM || '0';
            const pressure = cur.pressure || '—';
            const visibility = cur.visibility || '—';
            const uv = cur.uvIndex || '—';
            const icon = (cur.weatherIconUrl && cur.weatherIconUrl[0] && cur.weatherIconUrl[0].value) || '';

            // Prefer showing Fahrenheit when available
            const tempDisplay = cur.temp_F ? `${cur.temp_F}°F (${cur.temp_C}°C)` : `${cur.temp_C}°C`;
            const feelsDisplay = cur.FeelsLikeF ? `${cur.FeelsLikeF}°F (${cur.FeelsLikeC}°C)` : `${cur.FeelsLikeC}°C`;

            weatherElement.innerHTML = `
                <div class="weather-main">
                    ${icon ? `<img src="${icon}" alt="${desc}">` : ''}
                    <div>
                        <div class="weather-temp">${tempDisplay} <span class="muted">• feels like ${feelsDisplay}</span></div>
                        <div class="muted">${desc}</div>
                    </div>
                </div>
                <div class="weather-details">
                    Humidity: <strong>${humidity}%</strong> • Wind: <strong>${windDir} ${windKmph} km/h</strong> • Precip: <strong>${precip} mm</strong><br>
                    Visibility: <strong>${visibility} km</strong> • Pressure: <strong>${pressure} mb</strong> • UV: <strong>${uv}</strong>
                </div>
            `;
        } catch (err) {
            weatherElement.textContent = 'Unable to fetch weather';
            console.error(err);
        }
    }

    document.addEventListener('DOMContentLoaded', () => {
        updateClock();
        setInterval(updateClock, 1000);
        fetchPittsburghWeather();
        setInterval(fetchPittsburghWeather, 600000); // every 10 minutes
    });
</script>
</body>
</html>
